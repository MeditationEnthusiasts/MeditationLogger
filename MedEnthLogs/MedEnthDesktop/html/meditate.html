<!--
 Meditation Logger.
 Copyright (C) 2015-2016  Seth Hendrick.

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<!DOCTYPE html>
<html>
<head>
    <title>Meditation Enthusiasts Logger</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link type="text/css" rel="stylesheet" href="css/meditation_logger.css" media="screen" />
    <style>
        body {
            background-color: #FFE0C0;
        }
    </style>
    <script type="text/javascript">
        var ticks = {%startingSeconds%};
        var timerText;

        /// <summary>
        /// Runs when the window is loaded
        /// </summary>
        window.onload=function()
        {
            timerText = document.getElementById( "timerText" );
            RefreshDocument();
        }

        window.setInterval( OnTick, 1000 );

        /// <summary>
        /// Pads the given number with a single zero if it is less than 10
        /// </summary>
        /// <param name="num">The number to pad</param>
        /// <returns>The padded number in the form of a string</returns>
        function pad( num )
        {
            if ( num < 10 )
            {
                return "0" + num;
            }
            else
            {
                return "" + num;
            }
        }

        /// <summary>
        /// Runs every second.  Updates the timerText in the HTML document.
        /// </summary>
        function OnTick()
        {
            ++ticks;
            RefreshDocument()
        }

        /// <summary>
        /// Refreshes the timer text of the html.
        /// </summary>
        function RefreshDocument()
        {
            var count = ticks;
            var hours = Math.floor( count / 3600 ); // 3600 seconds in an hour
            count = count - ( hours * 3600 );
            var minutes = Math.floor( count / 60 ); // 60 seconds in a minute.
            var seconds = Math.floor( count % 60 );
            timerText.innerHTML = pad( hours ) + ":" + pad( minutes ) + ":" + pad( seconds );
        }

    </script>
</head>
<body>
    <div id="navBar">
        <a href="index.html"><div class="navBarPiece" id="homeButton">Home</div></a>
        <div class="navBarPiece" id="current">Meditate!</div>
        <a href="logbook.html"><div class="navBarPiece" id="logbookButton">View Logbook</div></a>
        <a href="map.html"><div class="navBarPiece" id="mapButton">View Map</div></a>
        <a href="export.html"><div class="navBarPiece" id="exportButton">Export</div></a>
        <a href="about.html"><div class="navBarPiece" id="aboutButton">About</div></a>
    </div>
    <div id="main">
        <h1>Happy Meditating!</h1>

        <strong id="timerText">00:00:00</strong>

        <form action="" method="post">
            <input name="finishButton" type="submit" value="Finish Meditating" />
        </form>
    </div>
</body>
</html>